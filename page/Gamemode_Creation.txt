<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Gamemode_Content"><span class="tocnumber">1</span> <span class="toctext">Gamemode Content</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Gamemode_Folder"><span class="tocnumber">2</span> <span class="toctext">Gamemode Folder</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Gamemode_Text_File"><span class="tocnumber">3</span> <span class="toctext">Gamemode Text File</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Settings"><span class="tocnumber">4</span> <span class="toctext">Settings</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Menu_Background_Images"><span class="tocnumber">5</span> <span class="toctext">Menu Background Images</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Menu_Logo_Image"><span class="tocnumber">6</span> <span class="toctext">Menu Logo Image</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Menu_Icon"><span class="tocnumber">7</span> <span class="toctext">Menu Icon</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Init_and_Shared_Files"><span class="tocnumber">8</span> <span class="toctext">Init and Shared Files</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#init.lua"><span class="tocnumber">8.1</span> <span class="toctext">init.lua</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#shared.lua"><span class="tocnumber">8.2</span> <span class="toctext">shared.lua</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#cl_init.lua"><span class="tocnumber">8.3</span> <span class="toctext">cl_init.lua</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#Deriving_Gamemodes"><span class="tocnumber">9</span> <span class="toctext">Deriving Gamemodes</span></a></li>
<li class="toclevel-1 tocsection-13"><a href="#Common_Errors"><span class="tocnumber">10</span> <span class="toctext">Common Errors</span></a>
<ul>
<li class="toclevel-2 tocsection-14"><a href="#Error_loading_gamemode:_info.Valid"><span class="tocnumber">10.1</span> <span class="toctext">Error loading gamemode: info.Valid</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Error_loading_gamemode:_.21IsValidGamemode"><span class="tocnumber">10.2</span> <span class="toctext">Error loading gamemode:&#160;!IsValidGamemode</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Game_crashes.2Ffreezes_on_death"><span class="tocnumber">10.3</span> <span class="toctext">Game crashes/freezes on death</span></a></li>
</ul>
</li>
</ul>
</td></tr></table>
<h1> <span class="mw-headline" id="Gamemode_Content"> Gamemode Content </span></h1>
<p>Gamemode content such as maps, models and sounds should be placed in gamemodes/content/ folder. (ie gamemodes/content/models/..).
</p>
<h1> <span class="mw-headline" id="Gamemode_Folder"> Gamemode Folder </span></h1>
<p>To create a new gamemode you need to create a new folder in the gamemodes folder. The folder should take the name of your gamemode. Inside of that folder there should be a text file named whatever your folder is.
</p><p>For instance, if my gamemode was called "SuperKillers", I would create a folder in "garrysmod/gamemodes/" called "superkillers". Then inside that folder I would create a text file called "superkillers.txt".
</p><p>Note that in previous versions of Garry's Mod this file was always called "info.txt" - but was changed in Version 13 to reflect the changes to the content.
</p>
<h1> <span class="mw-headline" id="Gamemode_Text_File"> Gamemode Text File </span></h1>
<p>The .txt file you created needs to be a <a rel="nofollow" class="external text" href="https://developer.valvesoftware.com/wiki/KeyValues_class">keyvalues</a> file.
</p>
<pre><code data-language="lua">&quot;superkillers&quot;
{
	&quot;base&quot;		&quot;base&quot;
	&quot;title&quot;		&quot;Super Killers&quot;
	&quot;maps&quot;		&quot;^sk_&quot;
	&quot;menusystem&quot;	&quot;1&quot;
	&quot;workshopid&quot;	&quot;15895&quot;

	&quot;settings&quot;
	{
		1
		{
			&quot;name&quot;		&quot;sk_maxfrags&quot;
			&quot;text&quot;		&quot;Max Frags&quot;
			&quot;help&quot;		&quot;The maxiumum number of frags before a map change&quot;
			&quot;type&quot;		&quot;Numeric&quot;
			&quot;default&quot;	&quot;20&quot;
		}

		
		2
		{
			&quot;name&quot;		&quot;sk_grenades&quot;
			&quot;text&quot;		&quot;Allow Grenades&quot;
			&quot;help&quot;		&quot;If enabled then grenades are enabled&quot;
			&quot;type&quot;		&quot;CheckBox&quot;
			&quot;default&quot;	&quot;1&quot;
		}
	}
}</code></pre>
<table class="wikitable">
<tr>
<th> key </th>
<th> description
</th></tr>
<tr>
<td> base</td>
<td> The gamemode you're deriving from. This will usually be base or sandbox.
</td></tr>
<tr>
<td> title</td>
<td> The 'nice' title of your gamemode. Can contain spaces and capitals.
</td></tr>
<tr>
<td> maps</td>
<td> The map filter for your gamemode. This is used to correctly categorise maps in the map selector. This should only be set if the maps are unique to your gamemode.
</td></tr>
<tr>
<td> menusystem</td>
<td> Include and set to 1 if this gamemode should be selectable from the main menu
</td></tr>
<tr>
<td> workshopid</td>
<td> Optional. If your gamemode is on Workshop then this should be the workshopid of the file. (You won't have a workshopid until you upload - so you will need to set this in an update)
</td></tr>
<tr>
<td> settings</td>
<td> See Below
</td></tr></table>
<h1> <span class="mw-headline" id="Settings"> Settings </span></h1>
<p>The settings table allows you to create server configuration convars for your gamemode. It's completely optional. Your text file doesn't have to have a settings section.
</p><p>In previous versions of GMod this section used to have its own file, in gamemode/&lt;gamemode&gt;/content/settings/server_settings/. It was moved to the root folder to decrease load times.
</p><p>These settings are configurable in the main menu in GMod. Each entry has a number of fields.
</p><p><br />
</p>
<table class="wikitable">
<tr>
<th> key </th>
<th> description
</th></tr>
<tr>
<td> name</td>
<td> The name of the convar
</td></tr>
<tr>
<td> text</td>
<td> The text to show in game to describe this convar
</td></tr>
<tr>
<td> help</td>
<td> The help text to show on the convar (in the console)
</td></tr>
<tr>
<td> type</td>
<td> Either Text, CheckBox or Numeric. These are case-sensitive!
</td></tr>
<tr>
<td> default</td>
<td> The default value for the convar
</td></tr>
<tr>
<td> singleplayer</td>
<td> Whether this convar should show up for singleplayer, just having this key will enable it, it doesn't matter what the value is
</td></tr></table>
<h1> <span class="mw-headline" id="Menu_Background_Images"> Menu Background Images </span></h1>
<p>If you want to include backgrounds with your gamemode place them in <b>gamemodes/&lt;yourgamemode&gt;/backgrounds/</b>. They must all be jpg images.
</p>
<h1> <span class="mw-headline" id="Menu_Logo_Image"> Menu Logo Image </span></h1>
<p>To supply a menu logo image place a png file in <b>gamemodes/&lt;yourgamemode&gt;/logo.png</b>. This image should be 128 pixels high and up to 1024 pixels wide. The default logo is 288 x 128.
</p>
<h1> <span class="mw-headline" id="Menu_Icon"> Menu Icon </span></h1>
<p>To supply a menu icon place a png file in <b>gamemodes/&lt;yourgamemode&gt;/icon24.png</b>. This image should ideally be 24x24 pixels but it can be up to 32x32. The server list displays the icons at 24x24 while the gamemode selection uses 32x32. Here's where it will appear.
</p>
<center><a href="/page/File:MenuIcons.jpg" class="image"><img alt="MenuIcons.jpg" src="/images/9/9f/MenuIcons.jpg" width="304" height="202" /></a></center>
<h1> <span class="mw-headline" id="Init_and_Shared_Files"> Init and Shared Files </span></h1>
<p>Three files are needed for your gamemode to function properly. These go into your &lt;gamemode&gt;/gamemode/ folder.
</p><p>Please note, that while we use shared.lua in the example below, it is completely optional. init.lua and cl_init.lua <b>are not</b>!
</p>
<h2> <span class="mw-headline" id="init.lua"> init.lua </span></h2>
<p>This file is called when the server loads the gamemode. The example below tells the resource system to send the two files to the client, and then loads shared.lua.
</p>
<pre><code data-language="lua">AddCSLuaFile( &quot;cl_init.lua&quot; )
AddCSLuaFile( &quot;shared.lua&quot; )

include( &quot;shared.lua&quot; )</code></pre>
<h2> <span class="mw-headline" id="shared.lua"> shared.lua </span></h2>
<p>This file sets some common variables and creates the Initialize function. This is the only function you NEED to define. All others will be called from the base gamemode.
</p>
<pre><code data-language="lua">GM.Name = &quot;Super Killers&quot;
GM.Author = &quot;N/A&quot;
GM.Email = &quot;N/A&quot;
GM.Website = &quot;N/A&quot;

function GM:Initialize()
	-- Do stuff
end</code></pre>
<h2> <span class="mw-headline" id="cl_init.lua"> cl_init.lua </span></h2>
<p>This file is called when the client loads the gamemode. You would put client specific things in here. We load shared.lua. Note that you can only 'include' files here that have been 'AddCSLuaFile'd on the server.
</p>
<pre><code data-language="lua">include( &quot;shared.lua&quot; )</code></pre>
<h1> <span class="mw-headline" id="Deriving_Gamemodes"> Deriving Gamemodes </span></h1>
<p>If you are deriving your gamemode from something other than base, use this function to tell the engine that we do.
</p><p>You must call the function on both, client and server, and since our shared.lua is included from both, cl_init.lua and init.lua, we can do it once, in shared.lua.
</p><p>In the example below, let's say we derive our gamemode from sandbox, so we add this to our shared.lua, somewhere above all function definitions is a good place:
</p>
<pre><code data-language="lua">
DeriveGamemode( &quot;sandbox&quot; )
</code></pre>
<h1> <span class="mw-headline" id="Common_Errors"> Common Errors </span></h1>
<h2> <span class="mw-headline" id="Error_loading_gamemode:_info.Valid">Error loading gamemode: info.Valid</span></h2>
<p>Your Gamemode Text File is invalid or was not found.
</p>
<h2> <span class="mw-headline" id="Error_loading_gamemode:_.21IsValidGamemode">Error loading gamemode:&#160;!IsValidGamemode</span></h2>
<p>The game could not find cl_init.lua or init.lua of your gamemode. Make sure these files exist in the correct place:
<br /><i>gamemodes/<b>yourgamemodename</b>/gamemode/init.lua</i>
<br /><i>gamemodes/<b>yourgamemodename</b>/gamemode/cl_init.lua</i>
</p>
<h2> <span class="mw-headline" id="Game_crashes.2Ffreezes_on_death">Game crashes/freezes on death</span></h2>
<p>You have not assigned a playermodel to the player.
</p>


