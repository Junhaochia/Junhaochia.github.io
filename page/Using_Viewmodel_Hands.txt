<p><a href="/page/File:HandsExample.jpg" class="image"><img alt="HandsExample.jpg" src="/images/0/00/HandsExample.jpg" width="921" height="598" /></a>
</p>
<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Scripted_Weapons"><span class="tocnumber">1</span> <span class="toctext">Scripted Weapons</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Custom_Gamemodes"><span class="tocnumber">2</span> <span class="toctext">Custom Gamemodes</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Without_Player_Classes"><span class="tocnumber">2.1</span> <span class="toctext">Without Player Classes</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Using_Player_Classes"><span class="tocnumber">2.2</span> <span class="toctext">Using Player Classes</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Clientside_code"><span class="tocnumber">2.3</span> <span class="toctext">Clientside code</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#Player_Class"><span class="tocnumber">3</span> <span class="toctext">Player Class</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Player_Models"><span class="tocnumber">4</span> <span class="toctext">Player Models</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Model_creators"><span class="tocnumber">5</span> <span class="toctext">Model creators</span></a></li>
</ul>
</td></tr></table>
<h1> <span class="mw-headline" id="Scripted_Weapons"> Scripted Weapons </span></h1>
<p>To make your SWEP use the viewmodel hands, add this code:
</p>
<pre><code data-language="lua">SWEP.UseHands = true</code></pre>
<p>Note that your SWEP must also use a C model for its viewmodel:
</p>
<pre><code data-language="lua">SWEP.ViewModel = &quot;models/weapons/c_smg1.mdl&quot;</code></pre>
<h1> <span class="mw-headline" id="Custom_Gamemodes"> Custom Gamemodes </span></h1>
<p>If you want to use the Viewmodel Hands system in your gamemode, you must put some code into your gamemode.
</p>
<h2> <span class="mw-headline" id="Without_Player_Classes"> Without Player Classes </span></h2>
<p>Serverside: ( This MUST go into a GM:PlayerSpawn function, paste it to the end )
</p>
<pre><code data-language="lua">
function GM:PlayerSpawn( ply )
	-- Your code
	ply:SetupHands() -- Create the hands and call GM:PlayerSetHandsModel
end

-- Choose the model for hands according to their player model.
function GM:PlayerSetHandsModel( ply, ent )

	local simplemodel = player_manager.TranslateToPlayerModelName( ply:GetModel() )
	local info = player_manager.TranslatePlayerHands( simplemodel )
	if ( info ) then
		ent:SetModel( info.model )
		ent:SetSkin( info.skin )
		ent:SetBodyGroups( info.body )
	end

end
</code></pre>
<h2> <span class="mw-headline" id="Using_Player_Classes"> Using Player Classes </span></h2>
<p>Serverside: ( Again, must be put into GM:PlayerSpawn after you set players class )
</p>
<pre><code data-language="lua">function GM:PlayerSpawn( ply )
	-- Set your player class

	ply:SetupHands() -- Create the hands and call GM:PlayerSetHandsModel
end</code></pre>
<p>By default GM:PlayerSetHandsModel calls GetHandsModel of players current player class.
</p>
<h2> <span class="mw-headline" id="Clientside_code"> Clientside code </span></h2>
<p>If you haven't overridden GM:PostDrawViewModel, this step is optional.<br />
This code makes the hands draw. It must be clientside.
</p>
<pre><code data-language="lua">function GM:PostDrawViewModel( vm, ply, weapon )

	if ( weapon.UseHands ||&#160;!weapon:IsScripted() ) then

		local hands = LocalPlayer():GetHands()
		if ( IsValid( hands ) ) then hands:DrawModel() end

	end

end</code></pre>
<h1> <span class="mw-headline" id="Player_Class"> Player Class </span></h1>
<p>If you want a specific player class to use specific hands then add this function.
</p>
<pre><code data-language="lua">function PLAYER:GetHandsModel()

	return { model = &quot;models/weapons/c_arms_cstrike.mdl&quot;, skin = 1, body = &quot;0100000&quot; }
end</code></pre>
<h1> <span class="mw-headline" id="Player_Models"> Player Models </span></h1>
<p>If you're adding a player model and want to add custom hands then use this code.
</p>
<pre><code data-language="lua">
player_manager.AddValidHands( &quot;css_arctic&quot;, &quot;models/weapons/c_arms_cstrike.mdl&quot;, 0, &quot;00000000&quot; )</code></pre>
<p>Where 'css_arctic' is the name you used when calling player_manager.AddValidModel â€” the two numbers are respectively the skin and bodygroup values.
</p><p>If a player model doesn't have a corresponding hands entry, it will default to the civilian hands.
</p>
<h1> <span class="mw-headline" id="Model_creators"> Model creators </span></h1>
<p>Here's an example c_model that shows how things need to be set up in your QC and SMD files. This is the source files of the medkit SWEP that is packed by default with Gmod.
</p><p><a rel="nofollow" class="external free" href="https://github.com/robotboy655/gmod-animations/raw/master/c_medkit.7z">https://github.com/robotboy655/gmod-animations/raw/master/c_medkit.7z</a>
</p><p>Here are the source files for the c_arms_citizen model, if you need some reference for compiling arms:
</p><p><a rel="nofollow" class="external free" href="https://github.com/robotboy655/gmod-animations/raw/master/c_arms_citizen.7z">https://github.com/robotboy655/gmod-animations/raw/master/c_arms_citizen.7z</a>
</p><p>Here's the citizen arms on a CAT animation rig.
</p><p><a rel="nofollow" class="external free" href="https://github.com/robotboy655/gmod-animations/raw/master/3DS2011_CAT_c_arms_citizen.max">https://github.com/robotboy655/gmod-animations/raw/master/3DS2011_CAT_c_arms_citizen.max</a>
</p><p>If you need SMD files for these arms (making your own animation rigs, etc.), here they are.
</p><p><a rel="nofollow" class="external free" href="https://github.com/robotboy655/gmod-animations/raw/master/c_arms_citizen.smd">https://github.com/robotboy655/gmod-animations/raw/master/c_arms_citizen.smd</a>
</p><p><a rel="nofollow" class="external free" href="https://github.com/robotboy655/gmod-animations/raw/master/c_arms_combine.smd">https://github.com/robotboy655/gmod-animations/raw/master/c_arms_combine.smd</a>
</p><p>The arms mesh should never be in the weapon model itself; that defeats the entire purpose of the system!
</p><p>Remember to include c_arms_definebones.qci from the medkit example, as otherwise StudioMDL will optimise away the arm bones that you've included and then it won't work.
</p>


