<table id="toc" class="toc"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Creating_a_Workshop_Addon"><span class="tocnumber">1</span> <span class="toctext">Creating a Workshop Addon</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Before_you_begin_-_Rules"><span class="tocnumber">2</span> <span class="toctext">Before you begin - Rules</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Preparing_your_addon"><span class="tocnumber">3</span> <span class="toctext">Preparing your addon</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Folder_with_addon_files"><span class="tocnumber">3.1</span> <span class="toctext">Folder with addon files</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#Example"><span class="tocnumber">3.1.1</span> <span class="toctext">Example</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-6"><a href="#The_icon"><span class="tocnumber">3.2</span> <span class="toctext">The icon</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#addon.json"><span class="tocnumber">3.3</span> <span class="toctext">addon.json</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="#Creating_a_.gma_for_upload"><span class="tocnumber">4</span> <span class="toctext">Creating a .gma for upload</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#Common_Errors"><span class="tocnumber">4.1</span> <span class="toctext">Common Errors</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#.5BFiles_does_not_pass_whitelist.5D"><span class="tocnumber">4.1.1</span> <span class="toctext">[Files does not pass whitelist]</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#Couldn.27t_parse_json"><span class="tocnumber">4.1.2</span> <span class="toctext">Couldn't parse json</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#Failed_to_write_file_.22....22_-_written_n_bytes.21_.28Can.27t_grow_buffer.3F.29"><span class="tocnumber">4.1.3</span> <span class="toctext">Failed to write file "..." - written n bytes! (Can't grow buffer?)</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-13"><a href="#Uploading_your_addon"><span class="tocnumber">5</span> <span class="toctext">Uploading your addon</span></a>
<ul>
<li class="toclevel-2 tocsection-14"><a href="#Common_Errors_2"><span class="tocnumber">5.1</span> <span class="toctext">Common Errors</span></a>
<ul>
<li class="toclevel-3 tocsection-15"><a href="#Compression_Failed"><span class="tocnumber">5.1.1</span> <span class="toctext">Compression Failed</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#Ran_out_of_quota"><span class="tocnumber">5.1.2</span> <span class="toctext">Ran out of quota</span></a></li>
<li class="toclevel-3 tocsection-17"><a href="#Addon_has_invalid_type.21"><span class="tocnumber">5.1.3</span> <span class="toctext">Addon has invalid type!</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#PublishWorkshopFile_failed.21_.288.29"><span class="tocnumber">5.1.4</span> <span class="toctext">PublishWorkshopFile failed! (8)</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="#PublishWorkshopFile_failed.21_.289.29"><span class="tocnumber">5.1.5</span> <span class="toctext">PublishWorkshopFile failed! (9)</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="#PublishWorkshopFile_failed.21_.28X.29"><span class="tocnumber">5.1.6</span> <span class="toctext">PublishWorkshopFile failed! (X)</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-21"><a href="#Alternatives"><span class="tocnumber">6</span> <span class="toctext">Alternatives</span></a></li>
<li class="toclevel-1 tocsection-22"><a href="#After_Going_Live"><span class="tocnumber">7</span> <span class="toctext">After Going Live</span></a></li>
</ul>
</td></tr></table>
<h1> <span class="mw-headline" id="Creating_a_Workshop_Addon">Creating a Workshop Addon</span></h1>
<p>This article will teach you how to prepare and upload an addon to the <a rel="nofollow" class="external text" href="https://steamcommunity.com/workshop/">Steam Workshop</a>.<br />
</p>
<h1> <span class="mw-headline" id="Before_you_begin_-_Rules"> Before you begin - Rules </span></h1>
<p>There are a few rules before you start uploading addons.
</p><p>Please see this page for complete set of rules:
<a href="/page/Steam_Workshop_Rules" title="Steam Workshop Rules">Steam Workshop Rules</a>
</p>
<h1> <span class="mw-headline" id="Preparing_your_addon"> Preparing your addon </span></h1>
<p>To upload an addon to workshop you will need the following things:
</p>
<ul><li> A folder anywhere on your computer containing addon files
</li><li> A 512x512 .jpg icon for your addon.
</li></ul>
<p>If you're going to make your addon public, please make sure it's unique and will add something new to Garry's Mod. Don't upload addons you didn't make, <i>even fixed versions</i>, without the author's consent.
</p>
<h2> <span class="mw-headline" id="Folder_with_addon_files"> Folder with addon files </span></h2>
<p>The structure of addon for Steam Workshop is the same as the classic addon system of Garry's Mod 12, except for those differences:
</p>
<ul><li> info.txt or addon.txt are not needed
</li><li> You can only upload files that would normally be mounted by the game, except for:
<ul><li> .dll, .exe, .htm, .html, .css and .js files are restricted
</li><li> .txt files are restricted too, except for vehicle scripts
</li></ul>
</li></ul>
<p>You addon folder structure must look somewhat like this: (below is just an example)
</p>
<pre><code data-language="lua">
myAddon/
myAddon/lua/autorun/myScript.lua
myAddon/materials/myMaterial.png
myAddon/maps/gm_examplemap.bsp
myAddon/maps/thumb/gm_examplemap.png
myAddon/gamemodes/mygamemode/mygamemode.txt
myAddon/gamemodes/mygamemode/gamemode/stuff.lua
myAddon/gamemodes/mygamemode/content/materials/mycontent.vtf
myAddon/gamemodes/mygamemode/entities/weapons/weapon_mygun.lua
myAddon/gamemodes/mygamemode/...
</code></pre>
<p>Here's all the folder names that your addon may contain, next to the addon.json file:
</p>
<pre><code data-language="lua">
maps
backgrounds
gamemodes
materials
lua
scenes
models
scripts
particles
sound - This is not a typo, there is no &quot;s&quot; for sound folder.
resource
</code></pre>
<table cellspacing="0" class="gmodwiki_note">
<tr>
<td>NOTE
</td>
<td>
<p><i>myAddon</i> is the folder you will need to input to gmad.exe or any other Workshop uploader and it's name could be anything, addon's name is defined on the Workshop Page for that addon and NOT by the folder name.
</p>
</td></tr></table>
<p>Full file path whitelist can be found here:
<a rel="nofollow" class="external free" href="https://github.com/garrynewman/gmad/blob/master/include/AddonWhiteList.h">https://github.com/garrynewman/gmad/blob/master/include/AddonWhiteList.h</a>
</p>
<h3> <span class="mw-headline" id="Example">Example</span></h3>
<p><a href="/page/File:addon_folder_structure.png" class="image"><img alt="addon folder structure.png" src="/images/3/32/addon_folder_structure.png" width="353" height="255" /></a><br />
<b>Sample Addon</b> is the folder you will need to provide to the gmad.exe.
</p>
<h2> <span class="mw-headline" id="The_icon"> The icon </span></h2>
<p>This <i>must</i> be a 512x512 Baseline JPEG image ( Progressive JPEG or a PNG image will NOT work! ).
If gmpublish.exe does not accept your icon, try reexporting it with Paint or Paint.NET, that should convert it to Baseline. The chroma must be 4:2:0, for instance Photoshop and GIMP can use 4:2:2 or 4:4:4, which are not accepted.
</p><p><b>Do not</b> use an image unrelated to your addon - this is stupid and will get your addon removed. Express your addon in image form.<br />
<b>Make it relevant to your addon.</b> <i>Please</i> don't just stitch together something horrible in MS Paint. It should look good, otherwise you'll be making the workshop look dirty. Besides, who wants to download something that looks like a three-year-old made it?
</p>
<h2> <span class="mw-headline" id="addon.json"> addon.json </span></h2>
<p>When creating an addon the folder should have an addon.json - which looks like this..
</p>
<pre><code data-language="lua">
{
	&quot;title&quot;		:	&quot;My Server Content&quot;,
	&quot;type&quot;		:	&quot;ServerContent&quot;,
	&quot;tags&quot;		:	[ &quot;roleplay&quot;, &quot;realism&quot; ],
	&quot;ignore&quot;	:
	[
		&quot;*.psd&quot;,
		&quot;*.vcproj&quot;,
		&quot;*.svn*&quot;
	]
}
</code></pre>
<p>title is the name of your addon.
</p><p>type is the type of addon, one of:
</p>
<pre><code data-language="lua">
&quot;ServerContent&quot;
&quot;gamemode&quot;
&quot;map&quot;
&quot;weapon&quot;
&quot;vehicle&quot;
&quot;npc&quot;
&quot;tool&quot;
&quot;effects&quot;
&quot;model&quot;
</code></pre>
<p>tags is up to two of these:
</p>
<pre><code data-language="lua">
&quot;fun&quot;
&quot;roleplay&quot;
&quot;scenic&quot;
&quot;movie&quot;
&quot;realism&quot;
&quot;cartoon&quot;
&quot;water&quot;
&quot;comic&quot;
&quot;build&quot;
</code></pre>
<p>Ignore is a simple wildcard list of files to ignore. You can have as many of these as you want - and they don't have to be wildcarded, they can be specific files.
</p>
<h1> <span class="mw-headline" id="Creating_a_.gma_for_upload"> Creating a .gma for upload </span></h1>
<p>For Windows, you can simply navigate to your GMad.exe in <b>&lt;STEAM LOCATION&gt;/steamapps/common/garrysmod/bin</b> and drag'n'drop your addon folder ( <i>myAddon</i> in this example<i> ) onto GMad.exe.</i>
</p><p>GMad.exe will now create your .gma. It will place it to the same location where your folder is, with the same name.
</p><p><b>Do not move GMad.exe anywhere!</b>
</p><p>Alternatively You can open the command prompt (cmd.exe), cd to the gmod bin folder <br />(<tt>cd "&lt;STEAM FOLDER&gt;/steamapps/common/garrysmod/bin"</tt>, include quotes), then enter the following command (including quotes):
</p>
<pre><code data-language="lua">gmad.exe create -folder &quot;&lt;FULL PATH TO ADDON FOLDER&gt;&quot; -out &quot;&lt;FULL PATH TO OUTPUT .gma FILE&gt;&quot;</code></pre>
<p>Windows users can also create a .bat file to automate this process:
</p>
<pre><code data-language="lua">&quot;C:\Program Files (x86)\Steam\steamapps\common\garrysmod\bin\gmad.exe&quot; create -folder&#160;%1
pause</code></pre>
<p>Just make sure to insert correct path to your GMad.exe.
</p>
<h2> <span class="mw-headline" id="Common_Errors"> Common Errors </span></h2>
<h3> <span class="mw-headline" id=".5BFiles_does_not_pass_whitelist.5D"> [Files does not pass whitelist] </span></h3>
<p>You have either dragged a wrong folder onto GMad.exe, your addon contains forbidden files or your addon has incorrect folder structure. See example above for correct addon folder structure and file whitelist.
</p>
<h3> <span class="mw-headline" id="Couldn.27t_parse_json"> Couldn't parse json </span></h3>
<p>Your JSON file is missing or it is invalid. Use any JSON validators to find and fix errors.
</p>
<h3> <span class="mw-headline" id="Failed_to_write_file_.22....22_-_written_n_bytes.21_.28Can.27t_grow_buffer.3F.29"> Failed to write file "..." - written n bytes! (Can't grow buffer?) </span></h3>
<p>Your addon weighs too much, switch to <a href="/page/Dev_Branch" title="Dev Branch">x86-64 branch</a> to increase gmad.exe limit.
</p>
<h1> <span class="mw-headline" id="Uploading_your_addon"> Uploading your addon </span></h1>
<p>There are multiple ways of doing that, we are going to cover only the most convenient way of doing this, if you are on Windows.
</p><p>At this point you should have a .gma file and a .jpg file. For the sake of making this easy, rename both files to have the same name, for example <i>myaddon</i>:
</p>
<ul><li> myaddon.jpg
</li><li> myaddon.gma
</li></ul>
<p>Next you want to navigate to your gmpublish folder and create a .bat file there:
</p>
<pre><code data-language="lua">
gmpublish.exe create -addon&#160;%~n1.gma -icon&#160;%~n1.jpg
</code></pre>
<p>Save it as something like <b>gmpublish_create.bat</b>.
</p><p>Once you got the .bat file ready, simply drag'n'drop your .gma or your .jpg onto that .bat file. It is essential that both files must have the same name.
</p><p>Now gmpublish.exe will go through the process of compressing and uploading the addon to Steam Workshop.
</p><p>Once that process is completed, open your Garry's Mod Steam Workshop, go to "My Shared Files" ( You can also get there from your profile ) and change visibility of your addon to Public.
</p><p>You are done. Your addon is now live. You can now change the title, description, images and videos for your addon.
</p><p>Note that rules also apply to your title, description, images, icon and videos:
</p>
<ul><li> No questionable content
</li><li> No racism or offensive language/material
</li></ul>
<h2> <span class="mw-headline" id="Common_Errors_2"> Common Errors </span></h2>
<h3> <span class="mw-headline" id="Compression_Failed"> Compression Failed </span></h3>
<p>This is simple - your addon is too big. This is usually solved by downscaling your .vtf textures. Note that some video cards may not even support 4096x4096 textures! 1024x1024 or 512x512 are usually more than enough.
</p><p>Make sure that if you are uploading a particularly texture-heavy addon that you use DXT5 texture compression. DXT5 is exponentially smaller than RGBA or BGRA, saving not only time downloading and uploading but cloud space.
</p>
<h3> <span class="mw-headline" id="Ran_out_of_quota"> Ran out of quota </span></h3>
<p>If this happened to you, contact robotboy655@facepunchstudios.com for help.
</p>
<h3> <span class="mw-headline" id="Addon_has_invalid_type.21"> Addon has invalid type! </span></h3>
<p>Your addon.json has the "type" tag set to an invalid value. You can see a list of allowed values above.
</p>
<h3> <span class="mw-headline" id="PublishWorkshopFile_failed.21_.288.29"> PublishWorkshopFile failed! (8) </span></h3>
<p>This error happens when the addon.json contains invalid UTF-8 sequences. This happens if you use an upload script (.cmd, .bat, etc) that cannot create the addon.json with the UTF-8 character set. Please fix your addon.json by editing it as UTF-8 or use a title using only US-ASCII characters (latin characters with no accents).
</p><p>This error only happens after the upload because the addon.json is packed inside of the sent GMA file.
</p>
<h3> <span class="mw-headline" id="PublishWorkshopFile_failed.21_.289.29"> PublishWorkshopFile failed! (9) </span></h3>
<p>An icon must be provided.
</p>
<h3> <span class="mw-headline" id="PublishWorkshopFile_failed.21_.28X.29"> PublishWorkshopFile failed! (X) </span></h3>
<p>If you encountered an error with a number that is not listed on this page, you can find a list of all Steam related error codes on this handy website: <a rel="nofollow" class="external free" href="https://steamerrors.com/">https://steamerrors.com/</a>
</p><p>Please note - that website is not associated with Steam, Valve or Facepunch in any way, and may be incomplete.
</p>
<h1> <span class="mw-headline" id="Alternatives"> Alternatives </span></h1>
<p>You can use alternative tools made by community members to create, extract and upload addons to Steam Workshop.
</p><p>Links to such known tools: ( feel free to expand )
</p>
<ul><li> <a rel="nofollow" class="external text" href="https://github.com/Leeous/gmod-addon-tool/">Garry's Mod Addon Tool (Windows)</a>
</li><li> <a rel="nofollow" class="external text" href="https://github.com/alatnet/gmpu">Garry's Mod Publishing Utility - Java based GUI wrapper</a>
</li><li> <a rel="nofollow" class="external text" href="https://github.com/FPtje/gmosh">gmosh - Command line interface wrapper</a>
</li><li> <a rel="nofollow" class="external text" href="https://github.com/EstevanTH/GMod-Easy-Addon-Uploader">Garry's Mod Easy Addon Uploader (for Windows only)</a>
</li><li> <a rel="nofollow" class="external text" href="https://github.com/GitSparTV/Files/tree/master/Lua%20Workshopper">LuaWorkshopper - Quick tool for Addon making and publishing</a>
</li></ul>
<h1> <span class="mw-headline" id="After_Going_Live"> After Going Live </span></h1>
<p>Please make sure your addon isn't creating errors for people. If your addon is creating too many errors it will be removed.
</p><p>You can learn how to <b>update</b> existing workshop addons in this article:
<a href="/page/Workshop_Addon_Updating" title="Workshop Addon Updating">Workshop Addon Updating</a>
</p>


